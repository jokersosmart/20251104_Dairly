# Synopsys VCS/Vlogan 詳細參數使用設定指南

本指南針對您提出的 VCS/Vlogan 關鍵編譯選項進行詳細解釋，包括其**設定原因**、**選項值**以及在**不同應用場合下的意義**。

---

## 一、 核心編譯選項詳解

| 選項 | 說明與設定原因 | 選項值與應用場合 |
| :--- | :--- | :--- |
| **`-ignore driver_checks`** | **說明**：用於**忽略 VCS 在編譯時發出的特定警告**，特別是關於訊號驅動 (Driver) 檢查的警告。這些警告通常發生在設計中存在多個驅動源，但設計者認為這種多驅動是預期行為時。 | **選項值**：通常單獨使用，無需參數。VCS 還有其他 `ignore` 選項，例如 `-ignore unique_checks` (忽略模組實例名稱重複檢查)。<br>**應用場合**：<br> - **IP 整合**：當整合的第三方 IP 產生無法修改的多驅動警告時。<br> - **舊程式碼**：在處理不符合現代 Verilog/SystemVerilog 嚴格規範的舊程式碼時。<br> - **警告過濾**：在大型專案中，用於過濾掉已知且無害的警告，使日誌更清晰。 |
| **`-l <log_file>`** | **說明**：用於**指定編譯或連結過程的日誌檔案名稱**。這是標準的 VCS 選項，用於將所有編譯器輸出（包括警告、錯誤和狀態訊息）導向到一個檔案，而不是標準輸出 (stdout)。 | **選項值**：`<log_file>` 是一個檔案路徑和名稱，例如 `-l compile.log` 或 `-l $dir_name/vcs.log`。<br>**應用場合**：<br> - **所有專案**：**這是必備的設定**，方便追蹤編譯過程、除錯錯誤、並作為編譯成功的證據。<br> - **自動化腳本**：在 Makefile 或 Shell 腳本中，用於自動化日誌管理。 |
| **`-Xmf=<size>`** | **說明**：用於**設定 VCS 仿真器在運行時可用的最大記憶體** (eXtra Memory for Fast simulation)。這個選項在 VCS 進行最終連結 (Linking) 時使用，會影響生成的 `simv` 可執行檔的記憶體配置。 | **選項值**：`<size>` 可以是十進制或十六進制數字，通常以位元組 (Bytes) 為單位，例如：<br> - `0x80000` (約 512MB)<br> - `2G` (2 Gigabytes)<br>**應用場合**：<br> - **大型設計**：當設計包含大量記憶體 (RAM/ROM) 或需要處理大量波形數據時，必須增加此值以避免仿真因記憶體不足而崩潰。<br> - **性能優化**：適當的記憶體配置可以提高仿真性能。 |
| **`+v2k`** | **說明**：**啟用 Verilog-2001 標準的語言特性**。Verilog-2001 引入了許多重要的改進，例如 `always @*`、`localparam`、函數和任務的埠列表等。 | **選項值**：單獨使用即可。<br>**應用場合**：<br> - **舊專案**：當設計檔案是 Verilog-2001 標準時使用。<br> - **現代設計**：雖然現代設計多使用 SystemVerilog (`-sverilog`)，但 `+v2k` 仍常被保留，以確保對所有 Verilog 程式碼的兼容性。 |
| **`-lca`** | **說明**：**Load Checkpoint/Archive**。啟用 VCS 的**增量編譯 (Incremental Compilation)** 功能。VCS 會儲存編譯的中間狀態，當設計檔案只有少量修改時，可以只重新編譯被修改的部分，從而**大幅減少編譯時間**。 | **選項值**：單獨使用即可。<br>**應用場合**：<br> - **大型專案**：**這是大型 SoC 專案的必備選項**。在數百萬行程式碼的專案中，可以將編譯時間從數小時縮短到數分鐘。<br> - **日常開發**：在頻繁修改和測試的階段，極大地提高了開發效率。 |
| **`-sverilog`** | **說明**：**啟用 SystemVerilog (IEEE 1800) 標準的語言特性**。SystemVerilog 是現代數位設計和驗證的標準語言，引入了類別、介面、斷言 (Assertion)、DPI 等高級功能。 | **選項值**：單獨使用即可。<br>**應用場合**：<br> - **所有現代專案**：**這是現代設計和 UVM 驗證的必備選項**。 |
| **`+libext+<ext>`** | **說明**：**Library Extension**。用於指定在通過 `-y` 選項指定的庫目錄中，VCS 應該搜尋哪些副檔名的檔案。 | **選項值**：可以指定多個副檔名，例如 `+libext+.v+.sv+.svh`。<br>**應用場合**：<br> - **IP 整合**：當庫目錄中包含多種檔案類型時，用於精確指定設計檔案的副檔名，避免編譯器錯誤地將日誌或腳本檔案視為設計檔案。 |
| **`-work <library_name>`** | **說明**：**指定當前編譯結果應存入的工作庫名稱**。這是 VCS **分步編譯 (Separate Compilation)** 流程的核心。VCS 會將編譯後的模組資訊存入這個邏輯庫中。 | **選項值**：`<library_name>` 是一個自定義的邏輯名稱，例如 `-work LIB1`、`-work WORK`。<br>**應用場合**：<br> - **大型專案**：用於將設計的不同部分（如 IP、Testbench、頂層）編譯到不同的庫中，實現模組化管理和增量編譯。<br> - **多個 IP 庫**：當需要管理多個獨立的 IP 庫時，每個 IP 庫可以有自己的工作庫。 |

---

## 二、 應用情境總結

| 情境 | 建議設定 | 設定原因 |
| :--- | :--- | :--- |
| **基本 RTL 仿真** | `-full64 -sverilog -timescale=1ns/1ps -l compile.log` | 啟用核心功能，設定時間單位，記錄日誌。 |
| **大型 SoC 專案** | `-lca -work <lib> -Xmf=2G +error+10000` | 啟用增量編譯加速，分配足夠記憶體，限制錯誤輸出。 |
| **IP 整合** | `-y <ip_dir> +libext+.v+.sv -ignore driver_checks` | 指定 IP 搜尋路徑和檔案類型，忽略 IP 產生的已知警告。 |
| **Verdi 除錯** | `-kdb` (編譯時) | 啟用 Knowledge Database，以便 Verdi 進行後續的波形和程式碼追蹤。 |
| **程式碼品質檢查** | `+lint=TFIPC-L` | 啟用靜態檢查，確保程式碼符合規範。 |

我已將此詳細指南儲存為 `vcs_detailed_options_guide.md`。
